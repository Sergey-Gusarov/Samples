## Примеры интеграции на языке Java
В каталоге [Java](https://github.com/storyclm/Samples/tree/master/integration/Java) представлены примеры интеграции с системой StoryCLM различных платформ на языке Java:
* [Apache Servicemix]() - интеграционная платформа, составной частью которой является интеграционный фрэймворк Apache Camel. Apache Camel реализует основные шаблдоны интеграции корпоративных приложений. К тому же в комплекте с Apache Camel идет оргомное множество компонентов, предоставляющих доступ к стандартным протоколкам или конкретным системам. Это позволяет легко организовывать взаимосвязь между несколькими системами в кратчайшие сроки. 

Для Servicemix редставлено 2 примера интеграции StoryCLM  и CRM Salesforce:
* С помощью специального компонента доступа к API StoryCLM - [StoryCLM Camel Component]
* Реализация интеграции в отдельном в Java классе с последующим встраиванием в маршрут Apache Camel

Оба примера представляют собой приложения на базе фрэймворка Aapache Camel (используется синтаксис blueprint) и выполняют одинаковую операцию: по расписанию информация об измененных данных извлекаетя из Salesforce и применяется к соответствующим данным в StoryCLM. 

В примере [StoryCLMCamelComponent]() используются средства фрэймворка Apcahe Camel для реализации алгоритма репликации данных (проект [SalesforceStoryCLMIntegration]()). В т.ч. компонент [StoryCLM Camel Component]() используется для доступа к StoryCLM, а компонент CamelSalesforceComponent осуществляет доступ к Salesforce. 

В примере [ReplicatorBean]() алгоритм репликации реализован средставми языка Java (проект [Salesdforce2StoryReplicator]()) и уже как атомарная часть внедрен в инфраструктуру Apache Camel (в проекте [Salesforce2StoryCamel]()). При этом для доступа к таблицам StoryCLM используется библиотека [stroryclmsdk](), в то время как  доступ к salesforce осуществляется библиотеками force-partner-api-40.0.0 и force-wsc-40.0.0. Все части примера ReplicatorBean кроме Salesforce2StoryCamel не зависят от контекста Camel, в связи с этим могут использоваться в любой другой инфраструктуре.

Так как Apache Servicemix предоставляет OSGI контейнер, примеры реализованы как совокупность OSGI бандлов, использующих сервисную архитектуру. В каждом примере имеется главное Camel приложение (Salesforce2StoryCamel и SalesforceStoryCLMIntegration), выполняющее высокоуровневый алгоритм по перемещению данных. При этом детали реализации конвертации и конфигурация доступа для различных сущностей вынесены в интерфейс сервиса (PartnerTypeConverterService и EntityTypeConverterService). Для каждой сущности создается отдельный сервис, реализующий соответсвующий интерфейс. После регистрации сервиса в OSGI контейнере, главное приложение использует его для обработки данных, указанных в сервисе (репликация сущности).

