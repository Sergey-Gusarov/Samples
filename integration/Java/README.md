# Примеры

StoryCLM дает разработчику большую свободу при создании интерактивных презентаций (приложений), 
а так же набор средств интеграции.

В этом репозитории собраны примеры, описывающие различные подходы по созданию контента для StoryCLM и интеграцию с приложениями и сервисами.

Вы можете использовать эти примеры в Ваших проектах как отправную точку в создании презентаций для StoryCLM или изучать и 
создавать на основе них свои решения.

## Презентации

В каталоге "[presentations](https://github.com/storyclm/StoryCLM-Samples/tree/master/presentations)" собраны презентации-примеры, которые помогут
понять принцип создания презентаций для StoryCLM.

## StoryCLM.JS

[StoryCLM.js](https://github.com/storyclm/storyCLM.js) - это библиотека, предоставляющая доступ к системным функциям (API) платформы StoryCLM из презентаций (приложений).

В каталоге "[storyclm.js](https://github.com/storyclm/StoryCLM-Samples/tree/master/storyclm.js)" находятся три приложения - примера. Загрузив их в StoryCLM, можно подробно изучить код и 
детально разобраться в работе библиотеке на примерах:

* [storyclm-js](https://github.com/storyclm/StoryCLM-Samples/tree/master/storyclm.js/storyclm-js) - интерактивный справочник по всем функциям библиотеки с подробным описанием;
* [tables](https://github.com/storyclm/StoryCLM-Samples/tree/master/storyclm.js/tables) - приложение, которое показывает на реальном примере работу с таблицами. В примере продемонстрирована постраничная выборка и CRUD операции.
* [querybuilder](https://github.com/storyclm/StoryCLM-Samples/tree/master/storyclm.js/tablesquery) - конструктор запросов [TablesQuery](https://github.com/storyclm/documentation/blob/master/TABLES_QUERY.md). Приложение - это визуальный конструктор запросов. Конструируя и отправляя запрос, можно освоить работу с выборкой данных из таблиц в StoryCLM.
## Примеры интеграции на языке Java
В каталоге [Java](https://github.com/storyclm/Samples/tree/master/integration/Java) представлены примеры интеграции с системой StoryCLM различных платформ на языке Java:
* [Apache Servicemix]() - интеграционная платформа, составной частью которой является интеграционный фрэймворк Apache Camel. Apache Camel реализует основные шаблдоны интеграции корпоративных приложений. К тому же в комплекте с Apache Camel идет оргомное множество компонентов, предоставляющих доступ к стандартным протоколкам или конкретным системам. Это позволяет легко организовывать взаимосвязь между несколькими системами в кратчайшие сроки. 
Для Servicemix редставлено 2 примера интеграции StoryCLM  и CRM Salesforce:
* * С помощью специального компонента доступа к API StoryCLM - [StoryCLM Camel Component]
* * Реализация интеграции в отдельном в Java классе с последующим встраиванием в маршрут Apache Camel
Оба примера представляют собой приложения на базе фрэймворка Aapache Camel (используется синтаксис blueprint) и выполняют одинаковую операцию: по расписанию информация об измененных данных извлекаетя из Salesforce и применяется к соответствующим данным в StoryCLM. 
В примере [StoryCLMCamelComponent]() используются средства фрэймворка Apcahe Camel для реализации алгоритма репликации данных (проект [SalesforceStoryCLMIntegration]()). В т.ч. компонент [StoryCLM Camel Component]() используется для доступа к StoryCLM, а компонент CamelSalesforceComponent осуществляет доступ к Salesforce. 
В примере [ReplicatorBean]() алгоритм репликации реализован средставми языка Java (проект [Salesdforce2StoryReplicator]()) и уже как атомарная часть внедрен в инфраструктуру Apache Camel (в проекте [Salesforce2StoryCamel]()). При этом для доступа к таблицам StoryCLM используется библиотека [stroryclmsdk](), в то время как  доступ к salesforce осуществляется библиотеками force-partner-api-40.0.0 и force-wsc-40.0.0. Все части примера ReplicatorBean кроме Salesforce2StoryCamel не зависят от контекста Camel, в связи с этим могут использоваться в любой другой инфраструктуре.
Так как Apache Servicemix предоставляет OSGI контейнер, примеры реализованы как совокупность OSGI бандлов, использующих сервисную архитектуру. В каждом примере имеется главное Camel приложение (Salesforce2StoryCamel и SalesforceStoryCLMIntegration), выполняющее высокоуровневый алгоритм по перемещению данных. При этом детали реализации конвертации и конфигурация доступа для различных сущностей вынесены в интерфейс сервиса (PartnerTypeConverterService и EntityTypeConverterService). Для каждой сущности создается отдельный сервис, реализующий соответсвующий интерфейс. После регистрации сервиса в OSGI контейнере, главное приложение использует его для обработки данных, указанных в сервисе (репликация сущности).


